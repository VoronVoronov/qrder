import{_ as y,A as V,m as k,c as v,a as t,d as A,w as a,F as b,r as l,o as C,e as B,b as d,t as u,f as D}from"./app-111cc770.js";const N={name:"Login",components:{Alert:V},data(){return{dialog:!0,form:{phone:"",password:""},alert:{title:null,type:null,show:!1,data:[]}}},methods:{...k(["setAuthenticated"]),login(){this.alert.data=[],axios.post("/api/v1/users/login",this.form).then(e=>{localStorage.setItem("token",e.data.data.token),this.alert.title=e.data.message,this.alert.type=e.data.status,this.alert.show=!0,setTimeout(()=>{this.alert.show=!1,this.$router.push({name:"dashboard"}),this.setAuthenticated(!0)},2e3)}).catch(e=>{this.alert.title=e.response.data.message,this.alert.type=e.response.data.status,this.alert.show=!0,e.response.data.errors.hasOwnProperty("phone")&&(this.alert.data.phone=e.response.data.errors.phone[0]),e.response.data.errors.hasOwnProperty("password")&&(this.alert.data.password=e.response.data.errors.password[0]),setTimeout(()=>{this.alert.show=!1},5e3)})}}},T={class:"container"};function U(e,s,$,F,o,m){const h=l("Alert"),i=l("el-input"),n=l("el-form-item"),p=l("el-button"),c=l("el-form"),f=l("el-dialog"),_=l("el-col"),w=l("el-row"),g=D("maska");return C(),v(b,null,[t(h,{title:o.alert.title,type:o.alert.type,show:o.alert.show},null,8,["title","type","show"]),A("div",T,[t(w,null,{default:a(()=>[t(_,{span:24,md:12},{default:a(()=>[t(f,{modelValue:o.dialog,"onUpdate:modelValue":s[4]||(s[4]=r=>o.dialog=r),title:e.$t("users.cabinet"),center:"","close-on-click-modal":!1,"close-on-press-escapes":!1,"show-close":!1},{default:a(()=>[t(c,null,{default:a(()=>[t(n,{error:this.alert.data.phone},{default:a(()=>[B(t(i,{modelValue:o.form.phone,"onUpdate:modelValue":s[0]||(s[0]=r=>o.form.phone=r),placeholder:e.$t("users.phone"),"data-maska":"+7 7## ###-##-##"},null,8,["modelValue","placeholder"]),[[g]])]),_:1},8,["error"]),t(n,{error:this.alert.data.password},{default:a(()=>[t(i,{type:"password",modelValue:o.form.password,"onUpdate:modelValue":s[1]||(s[1]=r=>o.form.password=r),"show-password":"",placeholder:e.$t("users.password")},null,8,["modelValue","placeholder"])]),_:1},8,["error"]),t(n,null,{default:a(()=>[t(p,{type:"success",onClick:s[2]||(s[2]=r=>m.login())},{default:a(()=>[d(u(e.$t("users.sign_in")),1)]),_:1}),t(p,{type:"primary",onClick:s[3]||(s[3]=r=>e.$router.push("/register"))},{default:a(()=>[d(u(e.$t("users.sign_up")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])]),_:1})]),_:1})])],64)}const O=y(N,[["render",U]]);export{O as default};
