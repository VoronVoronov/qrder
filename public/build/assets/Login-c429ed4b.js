import{A as y}from"./alert-4d2d625c.js";import{_ as V,c as k,a as t,d as v,w as l,F as b,r as a,o as A,e as C,b as d,t as u,f as B}from"./app-d88e6648.js";const D={name:"Login",components:{Alert:y},data(){return{dialog:!0,form:{phone:"",password:""},alert:{title:null,type:null,show:!1,data:[]}}},methods:{login(){this.alert.data=[],axios.post("/api/v1/users/login",this.form).then(e=>{localStorage.setItem("token",e.data.data.token),this.alert.title=e.data.message,this.alert.type=e.data.status,this.alert.show=!0,setTimeout(()=>{this.alert.show=!1,this.$router.push({name:"dashboard"})},2e3)}).catch(e=>{this.alert.title=e.response.data.message,this.alert.type=e.response.data.status,this.alert.show=!0,e.response.data.errors.hasOwnProperty("phone")&&(this.alert.data.phone=e.response.data.errors.phone[0]),e.response.data.errors.hasOwnProperty("password")&&(this.alert.data.password=e.response.data.errors.password[0]),setTimeout(()=>{this.alert.show=!1},5e3)})}}},N={class:"container"};function T(e,o,U,$,s,m){const h=a("Alert"),p=a("el-input"),n=a("el-form-item"),i=a("el-button"),c=a("el-form"),f=a("el-dialog"),_=a("el-col"),w=a("el-row"),g=B("maska");return A(),k(b,null,[t(h,{title:s.alert.title,type:s.alert.type,show:s.alert.show},null,8,["title","type","show"]),v("div",N,[t(w,null,{default:l(()=>[t(_,{span:24,md:12},{default:l(()=>[t(f,{modelValue:s.dialog,"onUpdate:modelValue":o[4]||(o[4]=r=>s.dialog=r),title:e.$t("users.cabinet"),center:"","close-on-click-modal":!1,"close-on-press-escapes":!1,"show-close":!1},{default:l(()=>[t(c,null,{default:l(()=>[t(n,{error:this.alert.data.phone},{default:l(()=>[C(t(p,{modelValue:s.form.phone,"onUpdate:modelValue":o[0]||(o[0]=r=>s.form.phone=r),placeholder:e.$t("users.phone"),"data-maska":"+7 7## ###-##-##"},null,8,["modelValue","placeholder"]),[[g]])]),_:1},8,["error"]),t(n,{error:this.alert.data.password},{default:l(()=>[t(p,{type:"password",modelValue:s.form.password,"onUpdate:modelValue":o[1]||(o[1]=r=>s.form.password=r),"show-password":"",placeholder:e.$t("users.password")},null,8,["modelValue","placeholder"])]),_:1},8,["error"]),t(n,null,{default:l(()=>[t(i,{type:"success",onClick:o[2]||(o[2]=r=>m.login())},{default:l(()=>[d(u(e.$t("users.sign_in")),1)]),_:1}),t(i,{type:"primary",onClick:o[3]||(o[3]=r=>e.$router.push("/register"))},{default:l(()=>[d(u(e.$t("users.sign_up")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])]),_:1})]),_:1})])],64)}const O=V(D,[["render",T]]);export{O as default};
