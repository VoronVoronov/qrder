import{A as V}from"./alert-d703d660.js";import{_ as b,c as k,a as l,d as m,w as o,F as v,r,o as P,b as h,t as d}from"./app-375d07d5.js";const U={name:"Register",components:{Alert:V},data(){return{second:30,intervalId:null,dialog:!0,policy:!1,closeStatus:!0,form:{email:"",password:"",password_confirmation:"",agreement:!1},alert:{title:null,type:null,show:!1,data:[]}}},methods:{showPolicy(){this.policy=!0,this.dialog=!1,setTimeout(()=>{setInterval(()=>{this.second>0?this.second-=1:this.closeStatus=!1},1e3)},1e3)},closePolicy(){this.policy=!1,this.dialog=!0},register(){this.alert.data=[],axios.post("/api/v1/users/register",this.form).then(e=>{this.alert.title=e.data.message,this.alert.type=e.data.status,this.alert.show=!0,localStorage.setItem("token",e.data.data.token),setTimeout(()=>{this.alert.show=!1,this.$router.push({name:"dashboard"})},2e3)}).catch(e=>{this.alert.title=e.response.data.message,this.alert.type=e.response.data.status,this.alert.show=!0,e.response.data.errors.hasOwnProperty("email")&&(this.alert.data.email=e.response.data.errors.email[0]),e.response.data.errors.hasOwnProperty("password")&&(this.alert.data.password=e.response.data.errors.password[0]),e.response.data.errors.hasOwnProperty("agreement")&&(this.alert.data.agreement=e.response.data.errors.agreement[0]),setTimeout(()=>{this.alert.show=!1},5e3)})}}},C={class:"container"};function S(e,s,A,T,t,i){const w=r("Alert"),u=r("el-input"),n=r("el-form-item"),_=r("el-checkbox"),p=r("el-button"),f=r("el-form"),c=r("el-dialog"),g=r("el-col"),y=r("el-row");return P(),k(v,null,[l(w,{title:t.alert.title,type:t.alert.type,show:t.alert.show},null,8,["title","type","show"]),m("div",C,[l(y,null,{default:o(()=>[l(g,{span:24,md:12},{default:o(()=>[l(c,{modelValue:t.dialog,"onUpdate:modelValue":s[6]||(s[6]=a=>t.dialog=a),title:e.$t("users.cabinet"),center:"","close-on-click-modal":!1,"close-on-press-escapes":!1,"show-close":!1},{default:o(()=>[l(f,null,{default:o(()=>[l(n,{error:this.alert.data.email},{default:o(()=>[l(u,{modelValue:t.form.email,"onUpdate:modelValue":s[0]||(s[0]=a=>t.form.email=a),placeholder:"E-mail"},null,8,["modelValue"])]),_:1},8,["error"]),l(n,{error:this.alert.data.password},{default:o(()=>[l(u,{type:"password",modelValue:t.form.password,"onUpdate:modelValue":s[1]||(s[1]=a=>t.form.password=a),"show-password":"",placeholder:e.$t("users.password")},null,8,["modelValue","placeholder"])]),_:1},8,["error"]),l(n,{error:this.alert.data.password},{default:o(()=>[l(u,{type:"password",modelValue:t.form.password_confirmation,"onUpdate:modelValue":s[2]||(s[2]=a=>t.form.password_confirmation=a),"show-password":"",placeholder:e.$t("users.password_confirmation")},null,8,["modelValue","placeholder"])]),_:1},8,["error"]),l(n,{error:this.alert.data.agreement},{default:o(()=>[l(_,{modelValue:t.form.agreement,"onUpdate:modelValue":s[3]||(s[3]=a=>t.form.agreement=a),label:e.$t("users.agree_checkbox"),onClick:s[4]||(s[4]=a=>i.showPolicy())},null,8,["modelValue","label"])]),_:1},8,["error"]),l(n,null,{default:o(()=>[l(p,{type:"success",onClick:s[5]||(s[5]=a=>i.register())},{default:o(()=>[h(d(e.$t("users.sign_up")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"]),l(c,{modelValue:t.policy,"onUpdate:modelValue":s[8]||(s[8]=a=>t.policy=a),title:e.$t("users.policy"),center:"","close-on-click-modal":!1,"close-on-press-escapes":!1,"show-close":!1,"before-close":i.closePolicy},{default:o(()=>[l(f,null,{default:o(()=>[l(n,null,{default:o(()=>[m("p",null,d(e.$t("users.agreement_text")),1)]),_:1}),l(n,null,{default:o(()=>[m("p",null,d(e.$t("users.policy_text")),1)]),_:1})]),_:1}),l(p,{type:"success",onClick:s[7]||(s[7]=a=>i.closePolicy()),disabled:t.closeStatus},{default:o(()=>[h(d(e.$t("users.read",{msg:t.second})),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue","title","before-close"])]),_:1})]),_:1})])],64)}const N=b(U,[["render",S]]);export{N as default};
