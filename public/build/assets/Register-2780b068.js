import{_ as k,A as b,m as v,c as P,a as s,d as u,w as a,F as U,r,o as A,e as C,b as h,t as p,f as S}from"./app-111cc770.js";const O={name:"Register",components:{Alert:b},data(){return{second:30,intervalId:null,dialog:!0,policy:!1,closeStatus:!0,form:{email:"",password:"",password_confirmation:"",phone:"",agreement:!1},alert:{title:null,type:null,show:!1,data:[]}}},methods:{...v(["setAuthenticated"]),showPolicy(){this.policy=!0,this.dialog=!1,window.setInterval(()=>{this.second>0?this.second--:this.closeStatus=!1},1e3)},closePolicy(){this.policy=!1,this.dialog=!0},register(){this.alert.data=[],axios.post("/api/v1/users/register",this.form).then(e=>{this.alert.title=e.data.message,this.alert.type=e.data.status,this.alert.show=!0,localStorage.setItem("token",e.data.data.token),setTimeout(()=>{this.alert.show=!1,this.setAuthenticated(!0),this.$router.push({name:"dashboard"})},2e3)}).catch(e=>{this.alert.title=e.response.data.message,this.alert.type=e.response.data.status,this.alert.show=!0,e.response.data.errors.hasOwnProperty("phone")&&(this.alert.data.phone=e.response.data.errors.phone[0]),e.response.data.errors.hasOwnProperty("email")&&(this.alert.data.email=e.response.data.errors.email[0]),e.response.data.errors.hasOwnProperty("password")&&(this.alert.data.password=e.response.data.errors.password[0]),e.response.data.errors.hasOwnProperty("agreement")&&(this.alert.data.agreement=e.response.data.errors.agreement[0]),setTimeout(()=>{this.alert.show=!1},5e3)})}}},B={class:"container"};function D(e,t,I,N,l,i){const w=r("Alert"),d=r("el-input"),n=r("el-form-item"),_=r("el-checkbox"),m=r("el-button"),f=r("el-form"),c=r("el-dialog"),g=r("el-col"),y=r("el-row"),V=S("maska");return A(),P(U,null,[s(w,{title:l.alert.title,type:l.alert.type,show:l.alert.show},null,8,["title","type","show"]),u("div",B,[s(y,null,{default:a(()=>[s(g,{span:24,md:12},{default:a(()=>[s(c,{modelValue:l.dialog,"onUpdate:modelValue":t[7]||(t[7]=o=>l.dialog=o),title:e.$t("users.cabinet"),center:"","close-on-click-modal":!1,"close-on-press-escapes":!1,"show-close":!1},{default:a(()=>[s(f,null,{default:a(()=>[s(n,{error:this.alert.data.phone},{default:a(()=>[C(s(d,{modelValue:l.form.phone,"onUpdate:modelValue":t[0]||(t[0]=o=>l.form.phone=o),placeholder:e.$t("users.phone"),"data-maska":"+7 7## ###-##-##"},null,8,["modelValue","placeholder"]),[[V]])]),_:1},8,["error"]),s(n,{error:this.alert.data.email},{default:a(()=>[s(d,{modelValue:l.form.email,"onUpdate:modelValue":t[1]||(t[1]=o=>l.form.email=o),placeholder:"E-mail"},null,8,["modelValue"])]),_:1},8,["error"]),s(n,{error:this.alert.data.password},{default:a(()=>[s(d,{type:"password",modelValue:l.form.password,"onUpdate:modelValue":t[2]||(t[2]=o=>l.form.password=o),"show-password":"",placeholder:e.$t("users.password")},null,8,["modelValue","placeholder"])]),_:1},8,["error"]),s(n,{error:this.alert.data.password},{default:a(()=>[s(d,{type:"password",modelValue:l.form.password_confirmation,"onUpdate:modelValue":t[3]||(t[3]=o=>l.form.password_confirmation=o),"show-password":"",placeholder:e.$t("users.password_confirmation")},null,8,["modelValue","placeholder"])]),_:1},8,["error"]),s(n,{error:this.alert.data.agreement},{default:a(()=>[s(_,{modelValue:l.form.agreement,"onUpdate:modelValue":t[4]||(t[4]=o=>l.form.agreement=o),label:e.$t("users.agree_checkbox"),onClick:t[5]||(t[5]=o=>i.showPolicy())},null,8,["modelValue","label"])]),_:1},8,["error"]),s(n,null,{default:a(()=>[s(m,{type:"success",onClick:t[6]||(t[6]=o=>i.register())},{default:a(()=>[h(p(e.$t("users.sign_up")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"]),s(c,{modelValue:l.policy,"onUpdate:modelValue":t[9]||(t[9]=o=>l.policy=o),title:e.$t("users.policy"),center:"","close-on-click-modal":!1,"close-on-press-escapes":!1,"show-close":!1,"before-close":i.closePolicy},{default:a(()=>[s(f,null,{default:a(()=>[s(n,null,{default:a(()=>[u("p",null,p(e.$t("users.agreement_text")),1)]),_:1}),s(n,null,{default:a(()=>[u("p",null,p(e.$t("users.policy_text")),1)]),_:1})]),_:1}),s(m,{type:"success",onClick:t[8]||(t[8]=o=>i.closePolicy()),disabled:l.closeStatus},{default:a(()=>[h(p(e.$t("users.read",{msg:l.second})),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue","title","before-close"])]),_:1})]),_:1})])],64)}const E=k(O,[["render",D]]);export{E as default};
