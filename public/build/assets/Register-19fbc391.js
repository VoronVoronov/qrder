import{_ as k,m as b,d as v,E as c,c as P,a as s,w as a,r as n,o as U,e as C,b as h,t as p,g as w,f as S}from"./app-d50343d2.js";const E={name:"Register",data(){return{second:30,intervalId:null,dialog:!0,policy:!1,closeStatus:!0,form:{email:"",password:"",password_confirmation:"",phone:"",agreement:!1},alert:{data:[]}}},methods:{...b(["setAuthenticated"]),showPolicy(){this.policy=!0,this.dialog=!1,window.setInterval(()=>{this.second>0?this.second--:this.closeStatus=!1},1e3)},closePolicy(){this.policy=!1,this.dialog=!0},register(){this.alert.data=[],axios.post(v.API_URL+"users/register",this.form).then(e=>{localStorage.setItem("token",e.data.data.token),c({message:e.data.message,type:"success",showClose:!1}),setTimeout(()=>{this.setAuthenticated(!0),this.$router.push({name:"dashboard"})},2e3)}).catch(e=>{c({message:e.response.data.message,type:"error",showClose:!1}),e.response.data.errors.hasOwnProperty("phone")&&(this.alert.data.phone=e.response.data.errors.phone[0]),e.response.data.errors.hasOwnProperty("email")&&(this.alert.data.email=e.response.data.errors.email[0]),e.response.data.errors.hasOwnProperty("password")&&(this.alert.data.password=e.response.data.errors.password[0]),e.response.data.errors.hasOwnProperty("agreement")&&(this.alert.data.agreement=e.response.data.errors.agreement[0])})}}},I={class:"container"};function N(e,o,O,A,l,d){const i=n("el-input"),r=n("el-form-item"),_=n("el-checkbox"),m=n("el-button"),u=n("el-form"),f=n("el-dialog"),g=n("el-col"),V=n("el-row"),y=S("maska");return U(),P("div",I,[s(V,null,{default:a(()=>[s(g,{span:24,md:12},{default:a(()=>[s(f,{modelValue:l.dialog,"onUpdate:modelValue":o[7]||(o[7]=t=>l.dialog=t),title:e.$t("users.cabinet"),center:"","close-on-click-modal":!1,"close-on-press-escapes":!1,"show-close":!1},{default:a(()=>[s(u,null,{default:a(()=>[s(r,{error:this.alert.data.phone},{default:a(()=>[C(s(i,{modelValue:l.form.phone,"onUpdate:modelValue":o[0]||(o[0]=t=>l.form.phone=t),placeholder:e.$t("users.phone"),"data-maska":"+7 7## ###-##-##"},null,8,["modelValue","placeholder"]),[[y]])]),_:1},8,["error"]),s(r,{error:this.alert.data.email},{default:a(()=>[s(i,{modelValue:l.form.email,"onUpdate:modelValue":o[1]||(o[1]=t=>l.form.email=t),placeholder:"E-mail"},null,8,["modelValue"])]),_:1},8,["error"]),s(r,{error:this.alert.data.password},{default:a(()=>[s(i,{type:"password",modelValue:l.form.password,"onUpdate:modelValue":o[2]||(o[2]=t=>l.form.password=t),"show-password":"",placeholder:e.$t("users.password")},null,8,["modelValue","placeholder"])]),_:1},8,["error"]),s(r,{error:this.alert.data.password},{default:a(()=>[s(i,{type:"password",modelValue:l.form.password_confirmation,"onUpdate:modelValue":o[3]||(o[3]=t=>l.form.password_confirmation=t),"show-password":"",placeholder:e.$t("users.password_confirmation")},null,8,["modelValue","placeholder"])]),_:1},8,["error"]),s(r,{error:this.alert.data.agreement},{default:a(()=>[s(_,{modelValue:l.form.agreement,"onUpdate:modelValue":o[4]||(o[4]=t=>l.form.agreement=t),label:e.$t("users.agree_checkbox"),onClick:o[5]||(o[5]=t=>d.showPolicy())},null,8,["modelValue","label"])]),_:1},8,["error"]),s(r,null,{default:a(()=>[s(m,{type:"success",onClick:o[6]||(o[6]=t=>d.register())},{default:a(()=>[h(p(e.$t("users.sign_up")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"]),s(f,{modelValue:l.policy,"onUpdate:modelValue":o[9]||(o[9]=t=>l.policy=t),title:e.$t("users.policy"),center:"","close-on-click-modal":!1,"close-on-press-escapes":!1,"show-close":!1,"before-close":d.closePolicy},{default:a(()=>[s(u,null,{default:a(()=>[s(r,null,{default:a(()=>[w("p",null,p(e.$t("users.agreement_text")),1)]),_:1}),s(r,null,{default:a(()=>[w("p",null,p(e.$t("users.policy_text")),1)]),_:1})]),_:1}),s(m,{type:"success",onClick:o[8]||(o[8]=t=>d.closePolicy()),disabled:l.closeStatus},{default:a(()=>[h(p(e.$t("users.read",{msg:l.second})),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue","title","before-close"])]),_:1})]),_:1})])}const D=k(E,[["render",N]]);export{D as default};
